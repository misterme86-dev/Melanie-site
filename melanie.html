<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Melanie's Site ‚Äî 5th Class Project</title>
  <style>
    body {
      margin: 0;
      font-family: 'Comic Sans MS', 'Comic Neue', system-ui, sans-serif;
      background: linear-gradient(135deg, #f9f7ff, #ffe8e8);
      color: #333;
      scroll-behavior: smooth;
    }

    /* ===== Code Tooltip (shows FULL HTML) ===== */
    .code-tip {
      position: fixed;
      max-width: min(90vw, 900px);
      max-height: 50vh;
      overflow: auto;
      background: #111;
      color: #f8f8f2;
      border: 2px solid #ff66b3;
      border-radius: 10px;
      padding: 10px 12px;
      font: 12px/1.4 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
      white-space: pre;
      box-shadow: 0 10px 25px rgba(0,0,0,.35);
      z-index: 9999;
      display: none;
    }

    /* Cute UI */
    header {
      background: #ff66b3;
      color: white;
      text-align: center;
      padding: 20px;
      font-size: 2em;
      font-weight: bold;
      text-shadow: 2px 2px 0 #ff3385;
      border-bottom: 4px solid #ff3385;
    }

    nav {
      display: flex;
      justify-content: center;
      gap: 14px;
      background: #ffd1dc;
      padding: 10px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      flex-wrap: wrap;
    }

    nav a {
      text-decoration: none;
      color: #ff3399;
      background: white;
      padding: 10px 18px;
      border-radius: 12px;
      border: 2px solid #ff66b3;
      font-weight: bold;
      transition: transform 0.2s, background 0.2s;
      position: relative;
      cursor: pointer;
    }

    nav a:hover { background: #ffb3d9; transform: scale(1.06); }
    nav a.active { background: #ff9fd0; }

    main {
      max-width: 900px;
      margin: 24px auto;
      background: white;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    h2 { color: #ff3385; }

    .section {
      margin: 20px 0;
      border: 2px dashed #ffb3d9;
      border-radius: 12px;
      padding: 14px;
    }

    .hidden { display: none; }

    footer {
      text-align: center;
      padding: 15px;
      background: #ffd1dc;
      color: #555;
      font-size: 0.9em;
      border-top: 3px solid #ff66b3;
    }
  </style>
</head>
<body>
  <header data-code="auto">üå∏ Melanie's Site üå∏ <br><small>5th Class Project</small></header>

  <nav aria-label="Main" data-code="auto">
    <a href="#about"   data-code="auto">About Me</a>
    <a href="#pigs"    data-code="auto">My Guinea Pigs</a>
    <a href="#hobbies" data-code="auto">Hobbies</a>
    <a href="#school"  data-code="auto">My School</a>
  </nav>

  <main>
    <section id="about" class="section" data-code="auto">
      <h2 data-code="auto">About Me</h2>
      <p data-code="auto">Hi! I'm Melanie and I'm in 5th class. I love art, animals, and making cool projects like this website!</p>
    </section>

    <section id="pigs" class="section hidden" data-code="auto">
      <h2>My Guinea Pigs</h2>
      <ul>
        <li>Nugget</li>
        <li>Daisy</li>
        <li>Spudette (Spud)</li>
        <li>Rose</li>
        <li>Noodle</li>
      </ul>
      <p>They love crunchy veggies and cozy blankets ü•ïüõèÔ∏è.</p>
    </section>

    <section id="hobbies" class="section hidden" data-code="auto">
      <h2>Hobbies</h2>
      <ul>
        <li>3D Printing üñ®Ô∏è</li>
        <li>Music üéµ</li>
        <li>Arts & Crafts üé®</li>
        <li>Travelling ‚úàÔ∏è</li>
      </ul>
    </section>

    
    <section id="school" class="section hidden" data-code="auto">
      <h2>My School</h2>
      <p>I go to <strong>Cloonakilla National School</strong>. My favourite subjects are <em>P.E.</em>, <em>Art</em>, and <em>Science</em>, and I love doing projects with my friends!</p>
    </section>
  </main>

  <footer data-code="auto">
    ¬© <span id="year"></span> Melanie's Site | Made with üíñ in 5th Class
  </footer>

  <!-- One shared tooltip element -->
  <pre id="codeTip" class="code-tip" aria-hidden="true"></pre>

  <script>
    // === Utilities: escape and pretty print HTML ===
    function escapeHtml(str){
      return str
        .replace(/&/g, '&amp;')
        .replace(/</g, '&lt;')
        .replace(/>/g, '&gt;');
    }
    function prettyOuterHTML(node){
      // Clone to avoid mutating original (and remove the tooltip if inside)
      const clone = node.cloneNode(true);
      // Remove runtime-only things (like the tooltip itself if nested)
      clone.querySelectorAll('#codeTip').forEach(n => n.remove());
      // Get HTML text
      let html = clone.outerHTML
        .replace(/></g, '>\n<'); // line break between tags
      return escapeHtml(html);
    }

    // === Code tooltip logic ===
    const tip = document.getElementById('codeTip');
    let tipHideTO = null;

    function showTipFor(target, event){
      const html = prettyOuterHTML(target);
      tip.textContent = html; // using textContent ensures it's escaped
      tip.style.display = 'block';
      positionTip(event);
      clearTimeout(tipHideTO);
    }

    function hideTip(){
      tipHideTO = setTimeout(()=>{ tip.style.display = 'none'; }, 100);
    }

    function positionTip(event){
      const pad = 12;
      let x = event.clientX + pad;
      let y = event.clientY + pad;
      const { innerWidth:w, innerHeight:h } = window;
      const rect = tip.getBoundingClientRect();
      if(x + rect.width > w) x = w - rect.width - pad;
      if(y + rect.height > h) y = h - rect.height - pad;
      tip.style.left = x + 'px';
      tip.style.top  = y + 'px';
    }

    // Attach hover listeners to any element that requests code via data-code="auto"
    document.addEventListener('mouseover', (e)=>{
      const el = e.target.closest('[data-code="auto"]');
      if(!el) return;
      showTipFor(el, e);
    });
    document.addEventListener('mousemove', (e)=>{
      if(tip.style.display === 'block') positionTip(e);
    });
    document.addEventListener('mouseout', (e)=>{
      const el = e.target.closest('[data-code="auto"]');
      if(!el) return;
      hideTip();
    });

    // === SPA nav behaviour ===
    document.getElementById('year').textContent = new Date().getFullYear();
    const links = Array.from(document.querySelectorAll('nav a'));
    const sections = Array.from(document.querySelectorAll('main .section'));

    function showSection(id){
      sections.forEach(s => s.classList.toggle('hidden', '#' + s.id !== id));
      links.forEach(a => a.classList.toggle('active', a.getAttribute('href') === id));
    }

    links.forEach(a => {
      a.addEventListener('click', e => {
        e.preventDefault();
        const id = a.getAttribute('href');
        history.replaceState(null, '', id);
        showSection(id);
      });
    });

    const start = location.hash || '#about';
    showSection(start);
  </script>
</body>
</html>
